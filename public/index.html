<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>User Gallery</title>
    <style>
    body {
        font-family: Arial, sans-serif;
        background: linear-gradient(to right, #12c2e9, #c471ed, #f64f59);
        text-align: center;
        margin: 0;
        padding: 0;
        color: white;
    }
    .gallery {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 20px;
        padding: 20px;
        max-width: 1200px;
        margin: 0 auto;
    }
    .media {
        background: white;
        padding: 15px;
        border-radius: 15px;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
        width: 400px;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .media:hover {
        transform: translateY(-5px);
        box-shadow: 0 0 25px rgba(0, 0, 0, 0.5);
    }
    img, video {
        max-width: 100%;
        width: 100%;
        height: 400px;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        transition: transform 0.3s ease;
    }
    img:hover, video:hover {
        transform: scale(1.03);
    }
    button {
        background: #007bff;
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 8px;
        cursor: pointer;
        margin: 10px 0;
        transition: background-color 0.3s ease;
    }
    button:hover {
        background: #0056b3;
    }
    p {
        color: #333;
        margin: 5px 0;
    }
</style>

</head>
<body>
    <h1>HOME OF HAPPY AND COURAGE</h1>
    <div class="gallery" id="gallery"></div>

    <script>
        fetch("/media/all")
            .then(res => res.json())
            .then(data => {
                const gallery = document.getElementById("gallery");
                gallery.innerHTML = "";
                data.forEach(media => {
                    const div = document.createElement("div");
                    div.className = "media";
                    const uploadTime = new Date(media.uploadTime).toLocaleString();

                    div.innerHTML = `
                        ${media.type === "image" 
                            ? `<img src="${media.url}" alt="Uploaded Image">` 
                            : `<video controls><source src="${media.url}" type="video/mp4"></video>`}
                        <p>${media.caption || "No Caption"}</p>
                        <p><strong>Uploaded at:</strong> ${uploadTime}</p>
                        <button onclick="likeMedia('${media._id}')">üëç Like (${media.likes})</button>
                    `;
                    gallery.appendChild(div);
                });
            });

        function likeMedia(id) {
            fetch(`/media/like/${id}`, { method: "POST" })
                .then(() => location.reload());
        }
    </script>
</body>
</html>


